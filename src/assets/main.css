/* src/assets/main.css */
@import './base.css';

:root {
  /* ================= Light Mode (ç™½æ˜¼æ¨¡å¼) ================= */
  --app-bg-canvas: #f5f7fa;        /* é¡µé¢åº•è‰² */
  --app-bg-card: #ffffff;          /* å¡ç‰‡åº•è‰² */
  --app-text-main: #1e293b;        /* ä¸»æ ‡é¢˜ */
  --app-text-sub: #64748b;         /* å‰¯æ ‡é¢˜ */
  --app-text-placeholder: #94a3b8; /* å ä½ç¬¦ */
  --app-border-color: #e2e8f0;     /* è¾¹æ¡† */
  
  --app-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --app-shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* ================= Dark Mode (æš—é»‘æ¨¡å¼) ================= */
html.dark {
  /* 1. æˆ‘ä»¬çš„è‡ªå®šä¹‰å˜é‡ - Slate è‰²ç³» */
  --app-bg-canvas: #0f172a;        /* é¡µé¢åº•è‰²ï¼šæ·±è“é»‘ */
  --app-bg-card: #1e293b;          /* å¡ç‰‡åº•è‰²ï¼šæ·±è“ */
  --app-text-main: #f1f5f9;        /* äº®ç™½ */
  --app-text-sub: #94a3b8;         /* ç°è“ */
  --app-text-placeholder: #475569; /* æ·±ç° */
  --app-border-color: #334155;     /* è¾¹æ¡†å˜æš— */
  
  --app-shadow-sm: none;
  --app-shadow-card: none;         /* æš—é»‘æ¨¡å¼åŽ»é˜´å½± */

  /* ðŸ”¥ 2. [æ ¸å¿ƒä¿®å¤] å¼ºåˆ¶è¦†ç›– Element Plus å…¨å±€èƒŒæ™¯å˜é‡ ðŸ”¥ */
  /* è¿™è§£å†³äº†ã€ä¸‹æ‹‰æ¡†ã€‘ã€ã€å¼¹çª—ã€‘ã€ã€æ°”æ³¡å¡ç‰‡ã€‘ä»ç„¶æ˜¯ç™½è‰²çš„é—®é¢˜ */
  --el-bg-color: #1e293b;
  --el-bg-color-overlay: #1e293b !important;  /* å…³é”®ï¼šä¸‹æ‹‰èœå•çš„èƒŒæ™¯è‰² */
  --el-fill-color-blank: #1e293b;  /* å…³é”®ï¼šè¾“å…¥æ¡†çš„èƒŒæ™¯è‰² */
  
  /* 3. [æ ¸å¿ƒä¿®å¤] å¼ºåˆ¶è¦†ç›– Element Plus æ–‡æœ¬ä¸Žè¾¹æ¡† */
  --el-text-color-primary: #f1f5f9;
  --el-text-color-regular: #cbd5e1;
  --el-text-color-secondary: #94a3b8;
  --el-border-color: #334155;
  --el-border-color-light: #334155;
  --el-border-color-lighter: #334155;
  --el-mask-color: rgba(0, 0, 0, 0.8); /* é®ç½©å±‚æ›´é»‘ */
}

/* === é€šç”¨æ ·å¼ === */
body {
  margin: 0;
  background-color: var(--app-bg-canvas);
  color: var(--app-text-main);
  font-family: 'Inter', sans-serif;
  transition: background-color 0.3s, color 0.3s;
}

/* æ»šåŠ¨æ¡é€‚é… */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
html.dark ::-webkit-scrollbar-thumb { background: #475569; }
html.dark ::-webkit-scrollbar-track { background: #0f172a; }

/* å¡ç‰‡åŸºç±» */
.card-base {
  background: var(--app-bg-card);
  border-radius: 8px;
  /* æš—é»‘æ¨¡å¼ä¸‹åŠ å¾®å¼±è¾¹æ¡†å¢žåŠ å±‚æ¬¡ */
  border: 1px solid transparent; 
  box-shadow: var(--app-shadow-card);
  transition: background-color 0.3s, border-color 0.3s;
}
html.dark .card-base {
  border-color: var(--app-border-color);
}

/* === å…¨å±€ç»„ä»¶æš—é»‘é€‚é…è¡¥ä¸ === */

/* 1. åŸºç¡€è§„åˆ™ï¼šè®©è¡¨æ ¼æ•´ä½“èƒŒæ™¯é€æ˜Žï¼Œä»Žè€Œé€å‡ºä¸‹æ–¹ .card-base çš„é¢œè‰² */
.el-table,
.el-table__expanded-cell {
    background-color: transparent !important;
    --el-table-bg-color: transparent !important;
    --el-table-tr-bg-color: transparent !important;
    --el-table-header-bg-color: transparent !important;
    --el-table-row-hover-bg-color: var(--el-fill-color-light) !important;
}

.el-table th,
.el-table tr,
.el-table td {
    background-color: transparent !important;
    border-bottom-color: var(--app-border-color) !important;
}

/* åŽ»é™¤è¡¨æ ¼åº•éƒ¨çš„ç™½çº¿ */
.el-table__inner-wrapper::before {
    display: none !important;
}

/* ðŸ”¥ðŸ”¥ðŸ”¥ [æ ¸å¿ƒä¿®å¤] å›ºå®šåˆ—é‡å é—®é¢˜ (Stacking Context Fix) ðŸ”¥ðŸ”¥ðŸ”¥ 
   åŽŸç†ï¼šå›ºå®šåˆ—å¿…é¡»æœ‰â€œä¸é€æ˜Žâ€çš„èƒŒæ™¯è‰²ï¼Œæ‰èƒ½é®æŒ¡ä½æ»šåŠ¨åˆ°åº•ä¸‹çš„æ–‡å­—ã€‚
*/

/* --- ç™½æ˜¼æ¨¡å¼ (Light Mode) --- */
/* åªè¦æ˜¯å›ºå®šåˆ—ï¼Œå°±å¼ºåˆ¶ä½¿ç”¨å¡ç‰‡èƒŒæ™¯è‰² (ç™½è‰²) */
.el-table .el-table-fixed-column--right,
.el-table .el-table-fixed-column--left {
    background-color: var(--app-bg-card) !important;
    /* å¯é€‰ï¼šåŠ ä¸ªé˜´å½±è®©å±‚æ¬¡æ›´æ˜Žæ˜¾ */
    box-shadow: -6px 0 10px -4px rgba(0, 0, 0, 0.05); 
}

/* --- æš—é»‘æ¨¡å¼ (Dark Mode) --- */
/* ðŸ”´ å…³é”®ç‚¹ï¼šå¢žåŠ  html.dark å‰ç¼€ï¼Œæå‡æƒé‡ï¼Œé˜²æ­¢è¢«ä¸Šé¢çš„ transparent è¦†ç›– */
html.dark .el-table .el-table-fixed-column--right,
html.dark .el-table .el-table-fixed-column--left {
    /* å¼ºåˆ¶ä½¿ç”¨æ·±è‰²èƒŒæ™¯ (#1e293b)ï¼Œç¡®ä¿ä¸é€æ˜Ž */
    background-color: var(--app-bg-card) !important; 
    box-shadow: -6px 0 10px -4px rgba(0, 0, 0, 0.3); /* æš—é»‘æ¨¡å¼é˜´å½±åŠ æ·± */
}

/* --- Hover çŠ¶æ€ä¿®å¤ --- */
/* å½“é¼ æ ‡æ‚¬åœåœ¨è¡Œä¸Šæ—¶ï¼Œå›ºå®šåˆ—çš„èƒŒæ™¯è‰²ä¹Ÿéœ€è¦åŒæ­¥å˜è‰²ï¼Œå¦åˆ™ä¼šå‡ºçŽ°â€œé•‚ç©ºâ€æ•ˆæžœ */

/* ç™½æ˜¼ Hover */
html:not(.dark) .el-table--enable-row-hover .el-table__body tr:hover > td.el-table-fixed-column--right,
html:not(.dark) .el-table--enable-row-hover .el-table__body tr:hover > td.el-table-fixed-column--left {
    background-color: var(--el-fill-color-light) !important;
}

/* æš—é»‘ Hover (ä½¿ç”¨åŠé€æ˜Žç™½æ¨¡æ‹Ÿé«˜äº®) */
html.dark .el-table--enable-row-hover .el-table__body tr:hover > td.el-table-fixed-column--right,
html.dark .el-table--enable-row-hover .el-table__body tr:hover > td.el-table-fixed-column--left {
    background-color: rgba(255, 255, 255, 0.05) !important;
}

/* --- åˆ†é¡µå™¨é€‚é… --- */
html.dark .el-pagination .btn-prev,
html.dark .el-pagination .btn-next,
html.dark .el-pagination .el-pager li {
    background-color: transparent !important;
    color: var(--app-text-sub);
    border: 1px solid var(--app-border-color);
}

html.dark .el-pagination .el-pager li.is-active {
    background-color: var(--el-color-primary) !important;
    color: #fff;
    border-color: var(--el-color-primary);
}

/* å¼ºåˆ¶è¾“å…¥æ¡†èƒŒæ™¯ (DeviceFilterBar) */
html.dark .el-input__wrapper {
    background-color: var(--app-bg-canvas) !important;
    box-shadow: 0 0 0 1px var(--app-border-color) inset !important;
}

/* å¼ºåˆ¶è®©å¼¹å‡ºçš„ä¸‹æ‹‰æ¡†ä½¿ç”¨è¿™ä¸ªèƒŒæ™¯ */
html.dark .el-popper,
html.dark .el-select__popper,
html.dark .el-dropdown__popper {
    background: var(--el-bg-color-overlay) !important;
    border-color: var(--el-border-color-light) !important;
}

/* ä¿®å¤ä¸‹æ‹‰é€‰é¡¹çš„é«˜äº®èƒŒæ™¯ */
html.dark .el-select-dropdown__item.hover, 
html.dark .el-select-dropdown__item:hover {
    background-color: rgba(255, 255, 255, 0.05) !important;
}

/* ==============================================
   æ ¸å¿ƒä¿®å¾© 1ï¼šå¾¹åº•è§£æ±ºæ»¾å‹•åŠ«æŒ (Scroll Hijacking - Enhanced)
   ============================================== */
/* é‡å° Element Plus è¡¨æ ¼çš„æ‰€æœ‰å…§éƒ¨æ»¾å‹•å®¹å™¨ */
.el-table .el-table__inner-wrapper,
.el-table .el-table__body-wrapper,
.el-table .el-table__header-wrapper,
.el-table .el-scrollbar__wrap { /* æ–°å¢žï¼šè¦†è“‹å…§ç½®æ»¾å‹•æ¢å®¹å™¨ */
    
    /* 1. å¼·åˆ¶é«˜åº¦è‡ªå‹•ï¼šè®“å®¹å™¨éš¨å…§å®¹æ’é–‹ï¼Œæ¶ˆé™¤ã€Œå…§éƒ¨æ»¾å‹•å€åŸŸã€çš„æ¦‚å¿µ */
    height: auto !important;
    
    /* 2. ç¦æ­¢ç¸±å‘æ»¾å‹•ï¼šç‰©ç†å±è”½ç¸±å‘æ»¾å‹•æ¢ */
    overflow-y: hidden !important;
    
    /* 3. å¼·åˆ¶æ»¾å‹•å†’æ³¡ï¼šç¢ºä¿æ»¾è¼ªäº‹ä»¶å‚³éžçµ¦å¤–å±¤é é¢ */
    overscroll-behavior-y: auto !important;
    
    /* 4. è§¸æŽ§å„ªåŒ– */
    touch-action: pan-y;
}

/* âš ï¸ é‡è¦ï¼šä¿ç•™æ©«å‘æ»¾å‹•èƒ½åŠ› */
.el-table .el-table__body-wrapper,
.el-table .el-scrollbar__wrap {
    overflow-x: auto !important;
}

/* ==============================================
   æ ¸å¿ƒä¿®å¾© 2ï¼šè§£æ±ºæš—é»‘æ¨¡å¼ä¸‹å›ºå®šåˆ—é€æ˜Ž/é‡ç–Šå•é¡Œ
   ============================================== */
/* å¼·åˆ¶çµ¦å›ºå®šåˆ—åŠ ä¸Šèˆ‡å¡ç‰‡ä¸€è‡´çš„èƒŒæ™¯è‰² */
html.dark .el-table .el-table-fixed-column--right,
html.dark .el-table .el-table-fixed-column--left {
    background-color: var(--app-bg-card) !important;
    box-shadow: -6px 0 10px -4px rgba(0, 0, 0, 0.3); /* åŠ æ·±é™°å½± */
}

/* ä¿®å¾© Hover ç‹€æ…‹ */
html.dark .el-table--enable-row-hover .el-table__body tr:hover > td.el-table-fixed-column--right,
html.dark .el-table--enable-row-hover .el-table__body tr:hover > td.el-table-fixed-column--left {
    background-color: rgba(255, 255, 255, 0.05) !important; /* æ¨¡æ“¬é«˜äº® */
}